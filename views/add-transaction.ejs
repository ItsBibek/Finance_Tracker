<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="mb-0" style="font-weight: 800; font-size: 2.5rem; color: #5b53f7;">Add New Transaction</h1>
            <a href="/transactions" class="btn btn-outline-secondary" style="border-radius: 10px;">
                <i class="fas fa-arrow-left me-2"></i> Back to Transactions
            </a>
        </div>
        <div class="budget-card" style="border-radius: 16px; overflow: hidden;">
            
            <div class="p-4">
                <form action="/transactions" method="POST" id="transactionForm">
                    <!-- Transaction Type with Toggle -->
                    <div class="mb-4">
                        <label class="form-label fw-medium mb-2">Transaction Type</label>
                        <div class="d-flex" style="background-color: #f1f5f9; border-radius: 10px; padding: 4px;">
                            
                            <div class="form-check form-check-inline flex-grow-1 mb-0 text-center py-2" style="margin-right: 0;">
                                <input class="form-check-input" type="radio" name="type" id="typeIncome" value="income" checked style="display: none;" onchange="updateCategoryOptions()">
                                <label class="form-check-label type-label" for="typeIncome" style="display: block; cursor: pointer; padding: 8px; border-radius: 8px; transition: all 0.2s;">
                                    <i class="fas fa-arrow-up text-success me-2"></i> Income
                                </label>
                            </div>

                            
                            <div class="form-check form-check-inline flex-grow-1 mb-0 text-center py-2" style="margin-right: 0;">
                                <input class="form-check-input" type="radio" name="type" id="typeExpense" value="expense" style="display: none;" onchange="updateCategoryOptions()">
                                <label class="form-check-label type-label" for="typeExpense" style="display: block; cursor: pointer; padding: 8px; border-radius: 8px; transition: all 0.2s;">
                                    <i class="fas fa-arrow-down text-danger me-2"></i> Expense
                                </label>
                            </div>
                            
                            
                            
                        </div>
                    </div>
                    
                    <!-- Amount with Large Input -->
                    <div class="mb-4">
                        <label for="amount" class="form-label fw-medium mb-2">Amount</label>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text" style="background-color: #f8fafc; border-right: none;">Rs</span>
                            <input type="number" class="form-control" id="amount" name="amount" step="1" required 
                                style="border-left: none; font-size: 1.5rem; height: 60px; font-weight: 600;" >
                        </div>
                    </div>
                    
                    <!-- Category with Icons -->
                    <div class="mb-4">
                        <label for="category" class="form-label fw-medium mb-2">Category</label>
                                                <select class="form-select form-select-lg" id="category" name="category" style="height: 60px;">
                            <!-- Categories will be dynamically populated by JavaScript -->
                        </select>
                    </div>
                    
                    <div class="row">
                        <!-- Description -->
                        <div class="col-md-7 mb-4">
                            <label for="description" class="form-label fw-medium mb-2">Description (Optional)</label>
                            <input type="text" class="form-control form-control-lg" id="description" name="description" 
                                placeholder="What's this for?" oninput="suggestCategory('description', 'category', 'categorySuggestion')">
                            <small id="categorySuggestion" class="form-text text-muted mt-1"></small>
                        </div>
                        
                        <!-- Date -->
                        <div class="col-md-5 mb-4">
                            <label for="date" class="form-label fw-medium mb-2">Date</label>
                            <input type="date" class="form-control form-control-lg" id="date" name="date" 
                                value="<%= new Date().toISOString().split('T')[0] %>" required>
                        </div>
                    </div>
                    
                    <!-- Recurring Transaction Section -->
                    <div class="mb-4 p-3" style="background-color: #f8f9fa; border-radius: 10px;">
                        <div class="form-check form-switch d-flex justify-content-between align-items-center">
                            <div>
                                <label class="form-check-label fw-medium" for="isRecurring">Recurring Transaction</label>
                                <small class="d-block text-muted">Set up a recurring schedule for this transaction.</small>
                            </div>
                            <input class="form-check-input" type="checkbox" id="isRecurring" name="isRecurring" style="width: 3em; height: 1.5em;">
                        </div>
                    </div>

                    <div class="mb-4" id="recurringIntervalContainer" style="display: none;">
                        <label for="recurringInterval" class="form-label fw-medium mb-2">Recurring Interval</label>
                        <select class="form-select form-select-lg" id="recurringInterval" name="recurringInterval" style="height: 60px;">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary w-100 py-3" style="font-weight: 600; font-size: 1.1rem; border-radius: 12px;">
                        <i class="fas fa-plus-circle me-2"></i> Add Transaction
                    </button>
                </form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const recurringToggle = document.getElementById('isRecurring');
        const intervalContainer = document.getElementById('recurringIntervalContainer');

        recurringToggle.addEventListener('change', function() {
            if (this.checked) {
                intervalContainer.style.display = 'block';
            } else {
                intervalContainer.style.display = 'none';
            }
        });
    });
</script>
            </div>
        </div>
    </div>
</div>
